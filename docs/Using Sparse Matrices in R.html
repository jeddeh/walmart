<!DOCTYPE html>
<!-- saved from url=(0077)http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/ -->
<html lang="en-US"><script type="text/javascript" async="" src="./Using Sparse Matrices in R_files/ga.js"></script><script type="text/javascript" src="chrome-extension://kajfghlhfkcocafkcjlajldicbikpgnp/catcher.js"><!-- script injected by Request Maker --></script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Using Sparse Matrices in R</title>

<link rel="stylesheet" href="./Using Sparse Matrices in R_files/style.min.css" type="text/css" media="all">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://www.johnmyleswhite.com/notebook/xmlrpc.php">

<meta name="generator" content="WordPress 4.3.1">
<meta name="template" content="Hybrid 1.2">
<link rel="alternate" type="application/rss+xml" title="John Myles White » Feed" href="http://www.johnmyleswhite.com/feed/">
<link rel="alternate" type="application/rss+xml" title="John Myles White » Comments Feed" href="http://www.johnmyleswhite.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="John Myles White » Using Sparse Matrices in R Comments Feed" href="http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.johnmyleswhite.com\/notebook\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.3.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><style type="text/css"></style><script src="./Using Sparse Matrices in R_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="codebox-css" href="./Using Sparse Matrices in R_files/codebox.css" type="text/css" media="screen">
<script type="text/javascript" src="./Using Sparse Matrices in R_files/jquery.js"></script>
<script type="text/javascript" src="./Using Sparse Matrices in R_files/jquery-migrate.min.js"></script>
<script type="text/javascript" src="./Using Sparse Matrices in R_files/codebox.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.johnmyleswhite.com/notebook/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.johnmyleswhite.com/notebook/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="The Psychology of Music and the ‘tuneR’ Package" href="http://www.johnmyleswhite.com/notebook/2011/10/25/the-psychology-of-music-and-the-tuner-package/">
<link rel="next" title="Back to Blogging" href="http://www.johnmyleswhite.com/notebook/2012/03/31/back-to-blogging/">
<link rel="canonical" href="./Using Sparse Matrices in R_files/Using Sparse Matrices in R.html">
<link rel="shortlink" href="http://www.johnmyleswhite.com/?p=4328">
<script type="text/javascript" src="./Using Sparse Matrices in R_files/audio-player.js"></script>
<script type="text/javascript">AudioPlayer.setup("http://www.johnmyleswhite.com/notebook/wp-content/plugins/audio-player/assets/player.swf?ver=2.0.4.6", {width:"290",animation:"yes",encode:"yes",initialvolume:"60",remaining:"no",noinfo:"no",buffer:"5",checkpolicy:"no",rtl:"no",bg:"f8f8f8",text:"666666",leftbg:"eeeeee",lefticon:"666666",volslider:"666666",voltrack:"FFFFFF",rightbg:"cccccc",rightbghover:"999999",righticon:"666666",righticonhover:"ffffff",track:"FFFFFF",loader:"9FFFB8",border:"666666",tracker:"DDDDDD",skip:"666666",pagebg:"FFFFFF",transparentpagebg:"yes"});</script><style type="text/css" media="screen">p.audioplayer_container span {visibility:hidden;height:24px;overflow:hidden;padding:0;border:none;}</style>
		<style type="text/css">
						ol.footnotes li {list-style-type:decimal;}
						ol.footnotes{color:#666666;}		</style>
		
<!-- Should give access to MathJax !-->
<script type="text/javascript" src="./Using Sparse Matrices in R_files/MathJax.js"></script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37948616-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">.MathJax_Preview .MJXc-math {color: inherit!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXc-script {font-size: .8em}
.MJXc-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXc-bold {font-weight: bold}
.MJXc-italic {font-style: italic}
.MJXc-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXc-largeop {font-size: 150%}
.MJXc-largeop.MJXc-int {vertical-align: -.2em}
.MJXc-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXc-display {display: block; text-align: center; margin: 1em 0}
.MJXc-math span {display: inline-block}
.MJXc-box {display: block!important; text-align: center}
.MJXc-box:after {content: " "}
.MJXc-rule {display: block!important; margin-top: .1em}
.MJXc-char {display: block!important}
.MJXc-mo {margin: 0 .15em}
.MJXc-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXc-denom {display: inline-table!important; width: 100%}
.MJXc-denom > * {display: table-row!important}
.MJXc-surd {vertical-align: top}
.MJXc-surd > * {display: block!important}
.MJXc-script-box > *  {display: table!important; height: 50%}
.MJXc-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXc-script-box > *:last-child > * {vertical-align: bottom}
.MJXc-script-box > * > * > * {display: block!important}
.MJXc-mphantom {visibility: hidden}
.MJXc-munderover {display: inline-table!important}
.MJXc-over {display: inline-block!important; text-align: center}
.MJXc-over > * {display: block!important}
.MJXc-munderover > * {display: table-row!important}
.MJXc-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXc-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXc-mtr {display: table-row!important}
.MJXc-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXc-mtr > .MJXc-mtd:first-child {padding-left: 0}
.MJXc-mtr:first-child > .MJXc-mtd {padding-top: 0}
.MJXc-mlabeledtr {display: table-row!important}
.MJXc-mlabeledtr > .MJXc-mtd:first-child {padding-left: 0}
.MJXc-mlabeledtr:first-child > .MJXc-mtd {padding-top: 0}
.MJXc-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXc-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXc-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXc-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXc-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXc-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXc-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXc-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXc-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXc-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXc-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_CHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body class="wordpress ltr en_US parent-theme y2015 m11 d02 h02 monday logged-out singular singular-post singular-post-4328 single-4328 chrome primary-inactive secondary-inactive subsidiary-inactive no-widgets"><div id="MathJax_Message" style="display: none;"></div>


<div id="body-container">

	
	<div id="header-container">

		<div id="header">

			<div id="site-title"><a href="http://www.johnmyleswhite.com/" title="John Myles White" rel="home"><span>John Myles White</span></a></div><div id="site-description"><span>"He who refuses to do arithmetic is doomed to talk nonsense."</span></div>
		</div><!-- #header -->

	</div><!-- #header-container -->

	
	<div id="container">

		
	<div id="content" class="hfeed content">

		<div class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb"><span class="trail-before">Browse:</span> <span class="trail-begin"><a href="http://www.johnmyleswhite.com/" title="John Myles White" rel="home" class="trail-begin">Home</a></span> <span class="sep">/</span> <a href="http://www.johnmyleswhite.com/notebook/2011/" title="2011">2011</a> <span class="sep">/</span> <a href="http://www.johnmyleswhite.com/notebook/2011/10/" title="October 2011">October</a> <span class="sep">/</span> <a href="http://www.johnmyleswhite.com/notebook/2011/10/31/" title="October 31, 2011">31</a> <span class="sep">/</span> <span class="trail-end">Using Sparse Matrices in R</span></div>
		
			<div id="post-4328" class="hentry post publish post-1 odd author-JohnMylesWhite category-programming category-statistics">

				<h1 class="post-title entry-title"><a href="./Using Sparse Matrices in R_files/Using Sparse Matrices in R.html">Using Sparse Matrices in R</a></h1><p class="byline">By <span class="author vcard"><a class="url fn n" rel="author" href="http://www.johnmyleswhite.com/notebook/author/JohnMylesWhite/" title="John Myles White">John Myles White</a></span> on <abbr class="published" title="Monday, October 31st, 2011, 6:20 pm">10.31.2011</abbr> </p>
				<div class="entry-content">
					<h3>Introduction</h3>
<p>I’ve recently been working with a couple of large, extremely sparse data sets in R. This has pushed me to spend some time trying to master the CRAN packages that support sparse matrices. This post describes three of them: the Matrix, slam and glmnet packages. The first two packages provide data storage classes for sparse matrices, while the last package can perform GLM analyses on data stored in a sparse matrix.</p>
<h3>The Matrix Package</h3>
<p>The first package I worked with that provides a sparse matrix implementation is Doug Bates’ <a href="">Matrix</a> package. In fact, matrices of class <code>Matrix</code> can be switched between full and sparse representations dynamically, but I’ll focus on forcing the use of a sparse representation.</p>
<p>As a first example, it’s helpful to generate a 1000×1000 matrix of zeros using the <code>matrix</code> class and then another 1000×1000 matrix of zeros using the <code>Matrix</code> class:</p>

<div class="wp_codebox"><table><tbody><tr id="p43281"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code" id="p4328code1"><pre class="c" style="font-family:monospace;">library<span style="color: #009900;">(</span><span style="color: #ff0000;">'Matrix'</span><span style="color: #009900;">)</span>
&nbsp;
m1 <span style="color: #339933;">&lt;-</span> matrix<span style="color: #009900;">(</span><span style="color: #0000dd;">0</span><span style="color: #339933;">,</span> nrow <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #339933;">,</span> ncol <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #009900;">)</span>
m2 <span style="color: #339933;">&lt;-</span> Matrix<span style="color: #009900;">(</span><span style="color: #0000dd;">0</span><span style="color: #339933;">,</span> nrow <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #339933;">,</span> ncol <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #339933;">,</span> sparse <span style="color: #339933;">=</span> TRUE<span style="color: #009900;">)</span>
&nbsp;
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m1<span style="color: #009900;">)</span>
<span style="color: #339933;"># 8000200 bytes</span>
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m2<span style="color: #009900;">)</span>
<span style="color: #339933;"># 5632 bytes</span></pre></td></tr></tbody></table></div>

<p>As you can see, the representation of a perfectly sparse matrix using the <code>Matrix</code> class uses more than one thousand times as much RAM. And you can check how much more RAM would be required if both matrices had exactly one non-zero entry:</p>

<div class="wp_codebox"><table><tbody><tr id="p43282"><td class="line_numbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="code" id="p4328code2"><pre class="c" style="font-family:monospace;">m1<span style="color: #009900;">[</span><span style="color: #0000dd;">500</span><span style="color: #339933;">,</span> <span style="color: #0000dd;">500</span><span style="color: #009900;">]</span> <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">1</span>
m2<span style="color: #009900;">[</span><span style="color: #0000dd;">500</span><span style="color: #339933;">,</span> <span style="color: #0000dd;">500</span><span style="color: #009900;">]</span> <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">1</span>
&nbsp;
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m1<span style="color: #009900;">)</span>
<span style="color: #339933;"># 8000200 bytes</span>
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m2<span style="color: #009900;">)</span>
<span style="color: #339933;"># 5648 bytes</span></pre></td></tr></tbody></table></div>

<p>The full matrix representation does not change in size because all of the zeros are being represented explicitly, while the sparse matrix is conserving that space by representing only the non-zero entries. With a simple subtraction, we find that adding one additional non-zero entry increases the storage requirement by 16 bytes. We can conclude that setting all of the entries to non-zero values would require <code> 5632 + 16 * 1000 * 1000</code> bytes, which is 16,005,632 bytes or almost exactly twice the amount of storage required to use the full representation implemented by the <code>matrix</code> class.</p>
<p>Of course, the take away lesson is that sparse matrices are very efficient if your data is sparse and mildly wasteful if your data is not sparse.</p>
<p>Beyond simple initialization and assignment operations, we can perform quite a few other operations on objects of class <code>Matrix</code>, including vector multiplication, matrix addition and subtraction and transposition:</p>

<div class="wp_codebox"><table><tbody><tr id="p43283"><td class="line_numbers"><pre>1
2
3
4
</pre></td><td class="code" id="p4328code3"><pre class="c" style="font-family:monospace;">m2 <span style="color: #339933;">%*%</span> rnorm<span style="color: #009900;">(</span><span style="color: #0000dd;">1000</span><span style="color: #009900;">)</span>
m2 <span style="color: #339933;">+</span> m2
m2 <span style="color: #339933;">-</span> m2
t<span style="color: #009900;">(</span>m2<span style="color: #009900;">)</span></pre></td></tr></tbody></table></div>

<p>In addition you can do binding operations using objects of class <code>Matrix</code> with the cBind and rBind functions:</p>

<div class="wp_codebox"><table><tbody><tr id="p43284"><td class="line_numbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="code" id="p4328code4"><pre class="c" style="font-family:monospace;">m3 <span style="color: #339933;">&lt;-</span> cBind<span style="color: #009900;">(</span>m2<span style="color: #339933;">,</span> m2<span style="color: #009900;">)</span>
nrow<span style="color: #009900;">(</span>m3<span style="color: #009900;">)</span>
ncol<span style="color: #009900;">(</span>m3<span style="color: #009900;">)</span>
&nbsp;
m4 <span style="color: #339933;">&lt;-</span> rBind<span style="color: #009900;">(</span>m2<span style="color: #339933;">,</span> m2<span style="color: #009900;">)</span>
nrow<span style="color: #009900;">(</span>m4<span style="color: #009900;">)</span>
ncol<span style="color: #009900;">(</span>m4<span style="color: #009900;">)</span></pre></td></tr></tbody></table></div>

<p>Other operations are probably supported, but I haven’t need them so far in my work.</p>
<h3>The slam Package</h3>
<p>An alternative to the Matrix package is the <a href="">slam</a> package by Kurt Hornik and others. The sparse matrices generated using this package can be noticeably smaller than those generated by the Matrix package in some cases.</p>
<p>For example, the same perfectly sparse matrix using the slam package requires only 1,032 bytes of space:</p>

<div class="wp_codebox"><table><tbody><tr id="p43285"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code" id="p4328code5"><pre class="c" style="font-family:monospace;">library<span style="color: #009900;">(</span><span style="color: #ff0000;">'slam'</span><span style="color: #009900;">)</span>
&nbsp;
m1 <span style="color: #339933;">&lt;-</span> matrix<span style="color: #009900;">(</span><span style="color: #0000dd;">0</span><span style="color: #339933;">,</span> nrow <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #339933;">,</span> ncol <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #009900;">)</span>
m2 <span style="color: #339933;">&lt;-</span> simple_triplet_zero_matrix<span style="color: #009900;">(</span>nrow <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #339933;">,</span> ncol <span style="color: #339933;">=</span> <span style="color: #0000dd;">1000</span><span style="color: #009900;">)</span>
&nbsp;
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m1<span style="color: #009900;">)</span>
<span style="color: #339933;"># 8000200 bytes</span>
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m2<span style="color: #009900;">)</span>
<span style="color: #339933;"># 1032 bytes</span></pre></td></tr></tbody></table></div>

<p>In short, you can make your data fit in 1/5 the amount of RAM under some circumstances. And we can once again check how much additional RAM you need for every new non-zero entry:</p>

<div class="wp_codebox"><table><tbody><tr id="p43286"><td class="line_numbers"><pre>1
2
3
4
5
6
</pre></td><td class="code" id="p4328code6"><pre class="c" style="font-family:monospace;"><span style="color: #339933;"># BUG HERE</span>
m1<span style="color: #009900;">[</span><span style="color: #0000dd;">500</span><span style="color: #339933;">,</span> <span style="color: #0000dd;">500</span><span style="color: #009900;">]</span> <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">1</span>
m2<span style="color: #009900;">[</span><span style="color: #0000dd;">500</span><span style="color: #339933;">,</span> <span style="color: #0000dd;">500</span><span style="color: #009900;">]</span> <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">1</span>
&nbsp;
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m1<span style="color: #009900;">)</span>
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>m2<span style="color: #009900;">)</span></pre></td></tr></tbody></table></div>

<p>Finally, all of the same matrix operations available with the <code>Matrix</code> class work on objects implemented by slam:</p>

<div class="wp_codebox"><table><tbody><tr id="p43287"><td class="line_numbers"><pre>1
2
3
4
</pre></td><td class="code" id="p4328code7"><pre class="c" style="font-family:monospace;">m2 <span style="color: #339933;">%*%</span> rnorm<span style="color: #009900;">(</span><span style="color: #0000dd;">1000</span><span style="color: #009900;">)</span>
m2 <span style="color: #339933;">+</span> m2
m2 <span style="color: #339933;">-</span> m2
t<span style="color: #009900;">(</span>m2<span style="color: #009900;">)</span></pre></td></tr></tbody></table></div>

<h3>The glmnet Package</h3>
<p>Of course, being able to load sparse data into RAM is only interesting if we can analyze it statistically. For me, this usually means that I fit some sort of GLM to the data: most of the time either linear or logistic regression — preferably with some sort of regularization.</p>
<p>Thankfully, the <a href="">glmnet</a> package allows full and sparse matrices to be used without any code changes. You simply need to provide arguments that use the Matrix package’s <code>Matrix</code> class to have glmnet switch over to computing with sparse matrices:</p>

<div class="wp_codebox"><table><tbody><tr id="p43288"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code" id="p4328code8"><pre class="c" style="font-family:monospace;">library<span style="color: #009900;">(</span><span style="color: #ff0000;">'Matrix'</span><span style="color: #009900;">)</span>
library<span style="color: #009900;">(</span><span style="color: #ff0000;">'glmnet'</span><span style="color: #009900;">)</span>
&nbsp;
n <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">10000</span>
p <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">500</span>
&nbsp;
x <span style="color: #339933;">&lt;-</span> matrix<span style="color: #009900;">(</span>rnorm<span style="color: #009900;">(</span>n <span style="color: #339933;">*</span> p<span style="color: #009900;">)</span><span style="color: #339933;">,</span> n<span style="color: #339933;">,</span> p<span style="color: #009900;">)</span>
iz <span style="color: #339933;">&lt;-</span> sample<span style="color: #009900;">(</span><span style="color: #0000dd;">1</span><span style="color: #339933;">:</span><span style="color: #009900;">(</span>n <span style="color: #339933;">*</span> p<span style="color: #009900;">)</span><span style="color: #339933;">,</span>
             size <span style="color: #339933;">=</span> n <span style="color: #339933;">*</span> p <span style="color: #339933;">*</span> <span style="color:#800080;">0.85</span><span style="color: #339933;">,</span>
             replace <span style="color: #339933;">=</span> FALSE<span style="color: #009900;">)</span>
x<span style="color: #009900;">[</span>iz<span style="color: #009900;">]</span> <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">0</span>
&nbsp;
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span>
&nbsp;
sx <span style="color: #339933;">&lt;-</span> Matrix<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> sparse <span style="color: #339933;">=</span> TRUE<span style="color: #009900;">)</span>
&nbsp;
object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>sx<span style="color: #009900;">)</span>
&nbsp;
beta <span style="color: #339933;">&lt;-</span> rnorm<span style="color: #009900;">(</span>p<span style="color: #009900;">)</span>
&nbsp;
y <span style="color: #339933;">&lt;-</span> x <span style="color: #339933;">%*%</span> beta <span style="color: #339933;">+</span> rnorm<span style="color: #009900;">(</span>n<span style="color: #009900;">)</span>
&nbsp;
glmnet.<span style="color: #202020;">fit</span> <span style="color: #339933;">&lt;-</span> glmnet<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> y<span style="color: #009900;">)</span></pre></td></tr></tbody></table></div>

<p>How much more efficient is the use of sparse matrices? Here I’ve recreated the example given in the glmnet package docs and added some additional data collection to give a sense of the time and speed gains that come with using sparse matrices for sparse data:</p>

<div class="wp_codebox"><table><tbody><tr id="p43289"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
</pre></td><td class="code" id="p4328code9"><pre class="c" style="font-family:monospace;">library<span style="color: #009900;">(</span><span style="color: #ff0000;">'Matrix'</span><span style="color: #009900;">)</span>
library<span style="color: #009900;">(</span><span style="color: #ff0000;">'glmnet'</span><span style="color: #009900;">)</span>
&nbsp;
set.<span style="color: #202020;">seed</span><span style="color: #009900;">(</span><span style="color: #0000dd;">1</span><span style="color: #009900;">)</span>
performance <span style="color: #339933;">&lt;-</span> data.<span style="color: #202020;">frame</span><span style="color: #009900;">(</span><span style="color: #009900;">)</span>
&nbsp;
<span style="color: #b1b100;">for</span> <span style="color: #009900;">(</span>sim in <span style="color: #0000dd;">1</span><span style="color: #339933;">:</span><span style="color: #0000dd;">10</span><span style="color: #009900;">)</span>
<span style="color: #009900;">{</span>
  n <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">10000</span>
  p <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">500</span>
&nbsp;
  nzc <span style="color: #339933;">&lt;-</span> trunc<span style="color: #009900;">(</span>p <span style="color: #339933;">/</span> <span style="color: #0000dd;">10</span><span style="color: #009900;">)</span>
&nbsp;
  x <span style="color: #339933;">&lt;-</span> matrix<span style="color: #009900;">(</span>rnorm<span style="color: #009900;">(</span>n <span style="color: #339933;">*</span> p<span style="color: #009900;">)</span><span style="color: #339933;">,</span> n<span style="color: #339933;">,</span> p<span style="color: #009900;">)</span>
  iz <span style="color: #339933;">&lt;-</span> sample<span style="color: #009900;">(</span><span style="color: #0000dd;">1</span><span style="color: #339933;">:</span><span style="color: #009900;">(</span>n <span style="color: #339933;">*</span> p<span style="color: #009900;">)</span><span style="color: #339933;">,</span>
               size <span style="color: #339933;">=</span> n <span style="color: #339933;">*</span> p <span style="color: #339933;">*</span> <span style="color:#800080;">0.85</span><span style="color: #339933;">,</span>
               replace <span style="color: #339933;">=</span> FALSE<span style="color: #009900;">)</span>
  x<span style="color: #009900;">[</span>iz<span style="color: #009900;">]</span> <span style="color: #339933;">&lt;-</span> <span style="color: #0000dd;">0</span>
  sx <span style="color: #339933;">&lt;-</span> Matrix<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> sparse <span style="color: #339933;">=</span> TRUE<span style="color: #009900;">)</span>
&nbsp;
  beta <span style="color: #339933;">&lt;-</span> rnorm<span style="color: #009900;">(</span>nzc<span style="color: #009900;">)</span>
  fx <span style="color: #339933;">&lt;-</span> x<span style="color: #009900;">[</span><span style="color: #339933;">,</span> seq<span style="color: #009900;">(</span>nzc<span style="color: #009900;">)</span><span style="color: #009900;">]</span> <span style="color: #339933;">%*%</span> beta
&nbsp;
  eps <span style="color: #339933;">&lt;-</span> rnorm<span style="color: #009900;">(</span>n<span style="color: #009900;">)</span>
  y <span style="color: #339933;">&lt;-</span> fx <span style="color: #339933;">+</span> eps
&nbsp;
  sparse.<span style="color: #202020;">times</span> <span style="color: #339933;">&lt;-</span> system.<span style="color: #202020;">time</span><span style="color: #009900;">(</span>fit1 <span style="color: #339933;">&lt;-</span> glmnet<span style="color: #009900;">(</span>sx<span style="color: #339933;">,</span> y<span style="color: #009900;">)</span><span style="color: #009900;">)</span>
  full.<span style="color: #202020;">times</span> <span style="color: #339933;">&lt;-</span> system.<span style="color: #202020;">time</span><span style="color: #009900;">(</span>fit2 <span style="color: #339933;">&lt;-</span> glmnet<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> y<span style="color: #009900;">)</span><span style="color: #009900;">)</span>
  sparse.<span style="color: #202020;">size</span> <span style="color: #339933;">&lt;-</span> as.<span style="color: #202020;">numeric</span><span style="color: #009900;">(</span>object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>sx<span style="color: #009900;">)</span><span style="color: #009900;">)</span>
  full.<span style="color: #202020;">size</span> <span style="color: #339933;">&lt;-</span> as.<span style="color: #202020;">numeric</span><span style="color: #009900;">(</span>object.<span style="color: #202020;">size</span><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span><span style="color: #009900;">)</span>
&nbsp;
  performance <span style="color: #339933;">&lt;-</span> rbind<span style="color: #009900;">(</span>performance<span style="color: #339933;">,</span> data.<span style="color: #202020;">frame</span><span style="color: #009900;">(</span>Format <span style="color: #339933;">=</span> <span style="color: #ff0000;">'Sparse'</span><span style="color: #339933;">,</span>
                                               UserTime <span style="color: #339933;">=</span> sparse.<span style="color: #202020;">times</span><span style="color: #009900;">[</span><span style="color: #0000dd;">1</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span>
                                               SystemTime <span style="color: #339933;">=</span> sparse.<span style="color: #202020;">times</span><span style="color: #009900;">[</span><span style="color: #0000dd;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span>
                                               ElapsedTime <span style="color: #339933;">=</span> sparse.<span style="color: #202020;">times</span><span style="color: #009900;">[</span><span style="color: #0000dd;">3</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span>
                                               Size <span style="color: #339933;">=</span> sparse.<span style="color: #202020;">size</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span>
  performance <span style="color: #339933;">&lt;-</span> rbind<span style="color: #009900;">(</span>performance<span style="color: #339933;">,</span> data.<span style="color: #202020;">frame</span><span style="color: #009900;">(</span>Format <span style="color: #339933;">=</span> <span style="color: #ff0000;">'Full'</span><span style="color: #339933;">,</span>
                                               UserTime <span style="color: #339933;">=</span> full.<span style="color: #202020;">times</span><span style="color: #009900;">[</span><span style="color: #0000dd;">1</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span>
                                               SystemTime <span style="color: #339933;">=</span> full.<span style="color: #202020;">times</span><span style="color: #009900;">[</span><span style="color: #0000dd;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span>
                                               ElapsedTime <span style="color: #339933;">=</span> full.<span style="color: #202020;">times</span><span style="color: #009900;">[</span><span style="color: #0000dd;">3</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span>
                                               Size <span style="color: #339933;">=</span> full.<span style="color: #202020;">size</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span>
<span style="color: #009900;">}</span>
&nbsp;
ggplot<span style="color: #009900;">(</span>performance<span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>x <span style="color: #339933;">=</span> Format<span style="color: #339933;">,</span> y <span style="color: #339933;">=</span> UserTime<span style="color: #339933;">,</span> fill <span style="color: #339933;">=</span> Format<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'bar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'errorbar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  ylab<span style="color: #009900;">(</span><span style="color: #ff0000;">'User Time in Seconds'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  opts<span style="color: #009900;">(</span>legend.<span style="color: #202020;">position</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'none'</span><span style="color: #009900;">)</span>
ggsave<span style="color: #009900;">(</span><span style="color: #ff0000;">'sparse_vs_full_user_time.pdf'</span><span style="color: #009900;">)</span>
&nbsp;
ggplot<span style="color: #009900;">(</span>performance<span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>x <span style="color: #339933;">=</span> Format<span style="color: #339933;">,</span> y <span style="color: #339933;">=</span> SystemTime<span style="color: #339933;">,</span> fill <span style="color: #339933;">=</span> Format<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'bar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'errorbar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  ylab<span style="color: #009900;">(</span><span style="color: #ff0000;">'System Time in Seconds'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  opts<span style="color: #009900;">(</span>legend.<span style="color: #202020;">position</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'none'</span><span style="color: #009900;">)</span>
ggsave<span style="color: #009900;">(</span><span style="color: #ff0000;">'sparse_vs_full_system_time.pdf'</span><span style="color: #009900;">)</span>
&nbsp;
ggplot<span style="color: #009900;">(</span>performance<span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>x <span style="color: #339933;">=</span> Format<span style="color: #339933;">,</span> y <span style="color: #339933;">=</span> ElapsedTime<span style="color: #339933;">,</span> fill <span style="color: #339933;">=</span> Format<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'bar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'errorbar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  ylab<span style="color: #009900;">(</span><span style="color: #ff0000;">'Elapsed Time in Seconds'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  opts<span style="color: #009900;">(</span>legend.<span style="color: #202020;">position</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'none'</span><span style="color: #009900;">)</span>
ggsave<span style="color: #009900;">(</span><span style="color: #ff0000;">'sparse_vs_full_elapsed_time.pdf'</span><span style="color: #009900;">)</span>
&nbsp;
ggplot<span style="color: #009900;">(</span>performance<span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>x <span style="color: #339933;">=</span> Format<span style="color: #339933;">,</span> y <span style="color: #339933;">=</span> Size <span style="color: #339933;">/</span> <span style="color: #0000dd;">1000000</span><span style="color: #339933;">,</span> fill <span style="color: #339933;">=</span> Format<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'bar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  stat_summary<span style="color: #009900;">(</span>fun.<span style="color: #202020;">data</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'mean_cl_boot'</span><span style="color: #339933;">,</span> geom <span style="color: #339933;">=</span> <span style="color: #ff0000;">'errorbar'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  ylab<span style="color: #009900;">(</span><span style="color: #ff0000;">'Matrix Size in MB'</span><span style="color: #009900;">)</span> <span style="color: #339933;">+</span>
  opts<span style="color: #009900;">(</span>legend.<span style="color: #202020;">position</span> <span style="color: #339933;">=</span> <span style="color: #ff0000;">'none'</span><span style="color: #009900;">)</span>
ggsave<span style="color: #009900;">(</span><span style="color: #ff0000;">'sparse_vs_full_memory.pdf'</span><span style="color: #009900;">)</span></pre></td></tr></tbody></table></div>

<p>The images below show the resulting performance metrics:</p>
<div style="text-align:center;"><img src="./Using Sparse Matrices in R_files/sparse_vs_full_user_time.png" alt="sparse_vs_full_user_time.png" border="0" width="600" height="600"></div>
<div style="text-align:center;"><img src="./Using Sparse Matrices in R_files/sparse_vs_full_system_time.png" alt="sparse_vs_full_system_time.png" border="0" width="600" height="600"></div>
<div style="text-align:center;"><img src="./Using Sparse Matrices in R_files/sparse_vs_full_elapsed_time.png" alt="sparse_vs_full_elapsed_time.png" border="0" width="600" height="600"></div>
<div style="text-align:center;"><img src="./Using Sparse Matrices in R_files/sparse_vs_full_memory.png" alt="sparse_vs_full_memory.png" border="0" width="600" height="600"></div>
<h3>Questions</h3>
<p>I have some remaining questions about the use of sparse matrices that others might be able to answer:</p>
<ul>
<li>How can I perform assignment in place on a matrix generated by the slam package?</li>
<li>How can I convert between sparse matrices generated by the Matrix and slam packages?</li>
</ul>
									</div><!-- .entry-content -->

				<p class="entry-meta"><span class="category"><span class="before">Posted in </span><a href="http://www.johnmyleswhite.com/notebook/category/programming/" rel="tag">Programming</a>, <a href="http://www.johnmyleswhite.com/notebook/category/statistics/" rel="tag">Statistics</a></span>  | <a class="comments-link" href="http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/#comments" title="Comment on Using Sparse Matrices in R">2 Responses</a></p>
			</div><!-- .hentry -->

			
			
<div id="comments-template">

	
		<div id="comments">

			<h3 id="comments-number" class="comments-header">2 responses to “Using Sparse Matrices in R”</h3>

			
			<ol class="comment-list">
				
	<li id="comment-22538" class="comment even thread-even depth-1 reader has-avatar">

		<img alt="Brian Dalesandro" src="./Using Sparse Matrices in R_files/413bad33c2776ebc1fade59b074aaa64" srcset="http://1.gravatar.com/avatar/413bad33c2776ebc1fade59b074aaa64?s=160&amp;d=identicon&amp;r=g 2x" class="avatar avatar-80 photo" height="80" width="80"><div class="comment-meta comment-meta-data"><span class="comment-author vcard"><cite class="fn">Brian Dalesandro</cite></span><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Friday, October 5th, 2012, 1:24 pm">10.5.2012</abbr> at <abbr class="comment-time" title="Friday, October 5th, 2012, 1:24 pm">1:24 pm</abbr></span> | <a class="permalink" href="http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/comment-page-1/#comment-22538" title="Permalink to comment 22538">Permalink</a>  </div>
		<div class="comment-text">
			
			<p>Thanks for the examples and analysis. Do you have any experience reading sparse matrices into R? The Matrix package has a few read functions that seem to depend on some very specific sparse matrix representations that I’ve never heard of (readHB &amp; readMM). Do you know of a more general format and function that can be used? The rest seems straightforward.</p>
		</div><!-- .comment-text -->

		
	</li><!-- .comment -->
	<li id="comment-22542" class="comment odd alt thread-odd thread-alt depth-1 reader has-avatar">

		<a href="http://johnmyleswhite.com/" rel="external nofollow" title="John Myles White"><img alt="John Myles White" src="./Using Sparse Matrices in R_files/b6b704f26ffe0d91e6317a1c069d4303" srcset="http://2.gravatar.com/avatar/b6b704f26ffe0d91e6317a1c069d4303?s=160&amp;d=identicon&amp;r=g 2x" class="avatar avatar-80 photo" height="80" width="80"></a><div class="comment-meta comment-meta-data"><span class="comment-author vcard"><cite class="fn" title="http://johnmyleswhite.com"><a href="http://johnmyleswhite.com/" title="John Myles White" class="url" rel="external nofollow">John Myles White</a></cite></span><!-- .comment-author .vcard --> <span class="published"><abbr class="comment-date" title="Saturday, October 6th, 2012, 3:35 pm">10.6.2012</abbr> at <abbr class="comment-time" title="Saturday, October 6th, 2012, 3:35 pm">3:35 pm</abbr></span> | <a class="permalink" href="http://www.johnmyleswhite.com/notebook/2011/10/31/using-sparse-matrices-in-r/comment-page-1/#comment-22542" title="Permalink to comment 22542">Permalink</a>  </div>
		<div class="comment-text">
			
			<p>I’m not aware of any better reading tools in R, although I imagine they exist. In the past I gave up on sparse matrix support in R and switched to Matlab for one project.</p>
		</div><!-- .comment-text -->

		
	</li><!-- .comment -->			</ol><!-- .comment-list -->

			
							<div class="comment-navigation comment-pagination paged-navigation">
									</div><!-- .comment-navigation -->
			
		</div><!-- #comments -->

	
	
</div><!-- #comments-template -->
			
		
		
	
		<div class="navigation-links">
			<a href="http://www.johnmyleswhite.com/notebook/2011/10/25/the-psychology-of-music-and-the-tuner-package/" rel="prev"><span class="previous">« Previous</span></a>			<a href="http://www.johnmyleswhite.com/notebook/2012/03/31/back-to-blogging/" rel="next"><span class="next">Next »</span></a>		</div><!-- .navigation-links -->

	
	</div><!-- .content .hfeed -->

		
	</div><!-- #container -->

	<div id="footer-container">

		
		<div id="footer">

			<div class="footer-content footer-insert"><p class="copyright">Copyright © 2015 <a class="site-link" href="http://www.johnmyleswhite.com/" title="John Myles White" rel="home"><span>John Myles White</span></a>.</p>

<p class="credit">Powered by <a class="wp-link" href="http://wordpress.org/" title="State-of-the-art semantic personal publishing platform"><span>WordPress</span></a> and <a class="theme-link" href="http://themehybrid.com/themes/hybrid" title="Hybrid WordPress Theme"><span>Hybrid</span></a>.</p></div>
		</div><!-- #footer -->

		
	</div><!-- #footer-container -->

</div><!-- #body-container -->

<script type="text/javascript" src="./Using Sparse Matrices in R_files/drop-downs.min.js"></script>



<!-- Dynamic Page Served (once) in 0.226 seconds -->
<!-- Cached page served by WP-Cache -->
</body></html>